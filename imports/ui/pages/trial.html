<template name="trial">
    {{#with session}}
        {{> trialSVG stage=stage trial=(trial settings stage trials)}}
    {{/with}}
</template>

<template name="trialElements">
    {{#each element}}
        {{> trialElement}}
    {{/each}}

    {{#each responses}}
        {{> trialElement}}
    {{/each}}
</template>

<template name="trialSVG">
    <svg width="100%" height="100%">
        {{#with elements trial stage}}
            {{> trialElements element=this stage=stage trial=trial}}
        {{/with}}
    </svg>
</template>

<template name="trialElement">
    {{#if $eq type 'cross'}}
        {{> cross}}
    {{/if}}
    {{#if $eq type 'stimuli'}}
        {{#if timer delay duration type}}
            {{> bars center=center data=this}}
        {{/if}}
    {{/if}}
    {{#if $eq type 'audio'}}
        {{audio this stage trial}}
    {{/if}}
    {{#if $eq type 'lights'}}
        {{command stage trial}}
    {{/if}}
    {{#if $eq type 'reward'}}
        {{command stage trial}}
    {{/if}}
</template>
