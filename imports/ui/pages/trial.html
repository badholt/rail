<template name="trial">
    {{#with session}}
        {{> trialSVG stage=stage trial=(trial trials)}}
    {{/with}}
</template>

<template name="trialElements">
    {{#each element}}
        {{> trialElement}}
    {{/each}}

    {{#each responses}}
        {{> trialElement}}
    {{/each}}
</template>

<template name="trialSVG">
    <svg width="100%" height="100%">
        {{#with elements trial stage}}
            {{> trialElements element=this}}
        {{/with}}
    </svg>
</template>

<template name="trialElement">
    {{#if $eq type 'cross'}}
        {{> cross}}
    {{/if}}
    {{#if $eq type 'stimuli'}}
        {{#if timer delay duration type}}
            {{> bars center=center data=this}}
        {{/if}}
    {{/if}}
    {{#if $eq type 'audio'}}
        {{audio this}}
    {{/if}}
    {{#if $eq type 'lights'}}
        {{command this}}
    {{/if}}
    {{#if $eq type 'reward'}}
        {{command this}}
    {{/if}}
</template>
