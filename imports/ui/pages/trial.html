<template name="trial">
    {{#with session}}
        {{#with data settings stage trials}}
            {{> trialSVG stage=stage trial=this}}
        {{/with}}
    {{/with}}
</template>

<template name="trialElements">
    {{#each element}}
        {{> trialElement}}
    {{/each}}

    {{#each responses}}
        {{> trialElement}}
    {{/each}}
</template>

<template name="trialSVG">
    <svg width="100%" height="100%">
        {{#with elements stage trial}}
            {{> trialElements element=this stage=../stage trial=../trial.number}}
        {{/with}}
        {{ir stage trial}}
    </svg>
</template>

<template name="trialElement">
    {{#if $eq type 'audio'}}
        {{audio stage trial}}
    {{/if}}
    {{#if $eq type 'cross'}}
        {{> cross}}
    {{/if}}
    {{#if $eq type 'stimuli'}}
        {{#if timer delay duration type}}
            {{> bars center=center data=this}}
        {{/if}}
    {{/if}}
    {{#if $eq type 'lights'}}
        {{command stage trial}}
    {{/if}}
    {{#if $eq type 'reward'}}
        {{command stage trial}}
    {{/if}}
</template>
